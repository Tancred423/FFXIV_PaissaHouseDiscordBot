services:
  bot:
    image: ghcr.io/tancred423/paissa-house-discord-bot:latest
    container_name: paissa-house-bot
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - REGISTER_COMMANDS=false
      - DEPLOYMENT_HASH=${DEPLOYMENT_HASH:-}
    volumes:
      - paissa-bot-data:/app/data

  register-commands:
    image: ghcr.io/tancred423/paissa-house-discord-bot:latest
    env_file:
      - .env
    environment:
      - REGISTER_COMMANDS=true
      - DEPLOYMENT_HASH=${DEPLOYMENT_HASH:-}
    restart: "no"
    volumes:
      - paissa-bot-data:/app/data
    depends_on:
      - bot

volumes:
  paissa-bot-data:
    name: paissa-bot-data
    external: false
    driver: local
